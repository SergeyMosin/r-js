const w=Symbol("ps"),aa=Symbol("pks"),z=Symbol("ed"),B=Symbol("gr"),J=Symbol("gx"),ba=Symbol("gpr"),L=Symbol("gd"),M=Symbol("gl"),da=Symbol("glw"),O=Symbol("ga"),ea=Symbol("gai"),P=Symbol("gr");let fa=!1;const ha=new Map,ia=new Map;let Q=null;
function ja(a,c,b,d=!1){ka();var e=c[B];if(e)for(const g of e)g&&(g===Q||(g.u===5?ha:ia).set(g,a));else if(e===null)return;e=a!==null&&typeof a==="object";for(var f in c)e&&Object.prototype.hasOwnProperty.call(a,f)?ja(a[f],c[f],f,!0):la(c[f]);if(!d){b===""?d=c[J]?.[w]?.path.split(".")??[]:(d=c[ba]?.[J]?.[w]?.path.split(".")??[],d.push(b));f=d.length-1;for(let g=c[ba],l=f;g&&g[ba];g=g[ba],l--){if(g[O])for(let k=l,r=g[d[k]];r&&k<=f;r=r[d[++k]])k===f&&ja(a,r,b,!0);if(c=g[B]){e=g[J]?.[w].path+".";for(const k of c)if(k.u===
2||k.Y&&k.Y.has(e))k===Q||(k.u===5?ha:ia).set(k,null)}}}}function ma(a,c){if(a!==Q)if(Q===null)na(a,c);else{var b=Q;Q=a;(a.u===5?ha:ia).delete(a);na(a,c);Q=b}}function oa(a){if(a=a[B])for(const c of a)c.m===1&&ma(c,null)}function na(a,c){let b;try{b=a.update.call(a.u===4?a.j:null,a.g[J],a.g[P],a,c),b instanceof Promise&&b.catch(d=>{pa(d,a)})}catch(d){pa(d,a);return}c=a.s;c===""||a.m!==1&&a.j[c]===b||(a.m=3,a.j[c]=b)}
function S(a,c,b,...d){let e;try{e=a.call(b,...d),e instanceof Promise&&(e=e.catch(f=>{pa(f,c)}))}catch(f){pa(f,c)}return e}
function U(a,c,b,d){if(b.length>0){const f=qa(c,b);if(f.g!==c){if(!f.$)return U(a,f.g,b,d??c[B]);var e=U(a,f.g,f.$,d??c[B]);b=f.l}for(let g=0,l=b.length;g<l;g++)e=b[g],e[e.length-1]==="["&&((a.Y??(a.Y=new Set)).add(c[L].path+"."+e.replace(/\[|\]/g,k=>k==="["?".":"")),e=e.slice(0,-1)),e=ra(c,e),e[B].add(a),a.B&&a.B.add(e);(c=d??c[B])&&c.add(a);a.u!==2&&a.j&&a.s!==""&&a.j[a.s]!==a.C&&(a.j[a.s]=a.C)}else na(a,null);return e}function sa(a,c){const b=qa(a,[c]);return b.g!==a?sa(b.g,c):ra(a,c)}
function ra(a,c){let b=a;c[c.length-1]==="["&&(c=c.slice(0,-1));const d=c.match(/[^.[\]]+/g)||[];for(let f=0;f<d.length;f++){const g=d[f];if(b[g]===void 0){var e=b[J];if(e&&!Object.prototype.hasOwnProperty.call(e,g)&&(console.warn("createGraphNode: missing state for path/prop",c,"/",g),e=a[L].D)){const l=g.toLowerCase();(e.hasAttribute("data-p:"+l)||e.hasAttribute("data-pm:"+l))&&console.warn("possible kebab-cased to camelCased mismatch for prop",g)}b[g]=ta(b)}b=b[g]}return b}
function W(){this.s!==""&&(this.j[this.s]=this.C)}function la(a){if(a){var c=a[B];if(c)for(const b of c)b.m>2&&(b.G(),b.m=2);a[J]&&(a[J]=null);for(const b in a)la(a[b])}}
function ua(a,c){try{a[L].D?.[z].N?.kill?.call(null,a[J],a[P])}catch(l){console.error("RunnerUtils.killTemplate: LifeCycle.kill error",l)}var b=c[L].U;if(b)for(let l=0,k=b.length;l<k;l++)if(b[l]===a){b.splice(l,1);break}for(b=[a];b.length>0;){var d=b.pop(),e=d[B];if(e)for(var f of e){if(f.u===5){e=f.j;const l=e[O];if(l){for(let k=l.length-1;k>=0;k--)if(l.hasOwnProperty(k)){const r=l[k][L];for(let t=r.length-1;t>=0;t--){const x=r[t];x[L].ca===d&&(ua(x,d),r.splice(t,1))}r.length===0&&l.pop()}l.length===
0&&(e[ea]=void 0)}}if(f.B){for(var g of f.B)(e=g[B])&&e.delete(f);f.B.clear()}(f.u===5?ha:ia).delete(f)}(d=d[L]?.U)&&b.push(...d)}a[M]=void 0;a[B]=void 0;a[J]=null;a[ba]=void 0;f=a[L];if(!f)console.warn("killTemplate: G_DATA not found, possible template initialization error");else if(f.D){b=f.D;g=va(b);d=b[z].I;if(d!==4){if(d===3&&f.T){for(const [l,k]of f.T){if(l[0]==="$"){const {j:r,s:t}=wa(l.substring(3),c[P],!0);r&&r[t]===k&&(r[t]=void 0)}k[aa]=!0}f.T.clear()}b[z]=void 0;b.remove()}else for(b[z]=
{I:d},c=b.shadowRoot??b;c.lastChild;)c.removeChild(c.lastChild);f.D=void 0;g&&g.remove()}a[L]=void 0}function ka(){fa||(Promise.resolve().then(()=>{do{for(const c of ha){var a=c[0];Q=a;ha.delete(a);na(a,c[1])}for(const c of ia)if(Q=a=c[0],ia.delete(a),na(a,c[1]),ha.size>0)break}while(ha.size>0||ia.size>0);fa=!1;Q=null}),fa=!0)}
function qa(a,c){const b=a[M]?.[da];if(b){var d=b.O;if(d){const e=[],f=[],[g,l]=d;for(d=0;d<c.length;d++){const k=c[d];(k===g||k===l||k.startsWith(g+".")||k.startsWith(g+"[")?f:e).push(k)}if(e.length>0)return{g:b.g,l:f,$:e}}else a=b.g}return{g:a,l:c,$:void 0}}
function pa(a,c){console.error("RunnerUtils.handleExecError: error:",a);const b=a instanceof Error?a:Error(typeof a==="string"?a:"unknown error",{cause:a});if(c instanceof Element)var d=c;else if(c.j){var e=c.j;e instanceof Element?d=e:e instanceof Text?d=e.parentElement:e.ownerElement&&(d=e.ownerElement);if(!d)if(e=c.g[L],e.D)d=e.D;else for(let f=0,g=e.U.length;f<g;f++){const l=e.U[f][L];if(l.D){d=l.D.parentElement;break}}}if(!d)throw console.error("RunnerUtils.handleExecError: cannot find Element for runner",
c),b;for(c=!1;d;){if(d.nodeType===Node.ELEMENT_NODE&&d.hasAttribute("data-err")){d[z].aa&&(d=d[z].aa,d.h.call(null,d.g[J],d.g[P],b),c=!0);break}if(d[z]?.I===1)break;d=d.parentElement||va(d)}if(!c)throw a;}
function xa(a,c,b,d=!1){let e,f;return new Proxy(a,{get(g,l){return l==="emit"?(e||(e=c?function(k,r,t=!1){t=t===!0;c.dispatchEvent(new CustomEvent(k,{detail:r,bubbles:t,composed:t}))}:a.global.emit),e):l==="watch"?(f||(f=function(k,r,t){const x=Y(Z(k),b[L].path,4);U({j:null,s:"",u:1,m:1,H:t,update:function(D,h,m){m.H===!1?m.H=!0:r(x.h.call(null,D,h))},G:W,C:void 0,g:b,B:new Set},b,x.A.l)}),f):g.local?.[l]??(d?void 0:g.global[l])},set(g,l,k){g.local||(g.local={});g.local[l]=k;return!0}})}
function ya(a,c,b){let d=/\bthis\b/.test(b.A.o)?za(c):null;const e=a[L];d&&e.D&&3===e.D[z].I&&(e.T??(e.T=new Map)).set(Math.random().toString(36),d);S(b.h,c,d,a[J],a[P])}
function za(a){let c=a;return new Proxy({},{get(b,d){if(d==="__raw")return c;Aa(c);const e=c[d];return typeof e==="function"?function(...f){return e.apply(c,f)}:e},set(b,d,e){if(d===aa)return c=void 0,!0;Aa(c);c[d]=e;return!0},has(b,d){Aa(c);return d in c},deleteProperty(b,d){Aa(c);return delete c[d]},ownKeys(){Aa(c);return Reflect.ownKeys(c)},getOwnPropertyDescriptor(b,d){Aa(c);return Reflect.getOwnPropertyDescriptor(c,d)},getPrototypeOf(){Aa(c);return Object.getPrototypeOf(c)}})}
function Aa(a){if(!a)throw ReferenceError("element is not defined");};const Ba=Object.getPrototypeOf(async function(){}).constructor;let Ca=0;function Da(){let a="",c=Ca++;do{const b=c%52;a=String.fromCharCode(b+(b<26?97:39))+a;c=Math.floor(c/52)-1}while(c>=0);return a}function Z(a){return/^\s*{{/.test(a)?a.replace(/^\s*{{\s*|\s*}}\s*$/g,""):a.trim()!==""&&Number.isFinite(+a)?a:"'"+a.replace(/'/g,"\\'")+"'"}const Ea=new Map;
function Y(a,c,b=1,d=""){d=c+a+d+b;var e=Ea.get(d);if(!e){e=c;const l=a.length;if(l>512)throw Error("expression is too long (max length: 512)");let k="";const r=new Set;e+=e?".":"";for(let t=0,x=0,D="",h="",m=!1;t<=l;t++){var f=l!==t?a[t]:"";if(x===0)f==='"'||f==="'"||f==="`"?(x=1,D=f,k+=f):/[a-zA-Z_$]/.test(f)?(x=2,h=f):f==="]"||f===")"?(x=3,h=f):(f==="{"?(m=!0,x=1,D=":"):f==="}"?m=!1:m&&f===","&&(x=1,D=":"),k+=f);else if(x===1){if(f===D)x=0;else if(m&&f==="."&&(a[t+1]||"")==="."&&(a[t+2]||"")===
".")x=0,t+=2,k+="..";else if(f==="\\"){k+=f+(a[t+1]||"\\");t++;continue}k+=f}else if(/[\w.$\d]/.test(f))h+=f;else if(f==="?"&&(a[t+1]||"")===".")h+=f;else{if(f==="["||f==="("){if(h+=f,f=a.substring(t+1).match(/^\s*(?:\d+|'(?:0x[0-9a-fA-F]+|[0-9]+)'|"(?:0x[0-9a-fA-F]+|[0-9]+)")\s*\]/)){h+=f[0];t+=f[0].length;continue}}else--t;if(h==="true"||h==="false"||h==="null"||h==="undefined"||h==="void"||h==="this"||h==="$evt"||h==="$err"||h==="await"||h==="return"||h.startsWith("$r.")||h.startsWith("$err.")||
h.startsWith("$evt.")||h.startsWith("this.")||h.startsWith("void("))k+=h;else{f=h;var g=x===3||/[\])]/.test(h[0])||/[[(]/.test(h[h.length-1]);const n=f.replace(/\s*/g,"").replace(/\?\./g,"."),y=n[0];let u=-1;g?(y!=="]"&&y!==")"&&(k+=e,n[n.length-1]==="("&&(u=n.lastIndexOf("."))),y!=="]"&&n[n.length-1]==="["&&(r.delete(n.slice(0,-1)),r.add(n))):(r.add(n),k+=e);u!==-1&&r.add(n.substring(0,u));k+=f}x=0}}e={o:k,l:Array.from(r),ja:[]};e={A:e,h:b>2?new (/^\s*await\b/.test(a)?Ba:Function)(c,"$r",(b===3?
"":"return ")+e.o):null};b>1&&Ea.set(d,e)}return e}function Ga(a,c,b){const d=c[L];b={[L]:{path:d.path+"_"+Da(),D:a,U:[]},[B]:b?new Set:c[B],[J]:null};const e=a?.[z];b[P]=e&&e.I===3?c[P]:xa({global:c[P]},a,b,a?.hasAttribute("data-no-refs"));e&&e.L&&(e.L.g=c);d.U.push(b);return b}function ta(a){return{[B]:new Set,[ba]:a,[J]:null}}function Ha(a){if(!a)return!1;const c=a.length;for(let b=0;b<c;b++){const d=a.charCodeAt(b);if(d<48||d>57)return!1}return c===1||a[0]!=="0"}
function Ia(a){return a.replace(/-./g,c=>c.toUpperCase()[1])}function wa(a,c,b=!1){a=a.replace(/\[/g,"[.").replace(/\]/g,"").split(".");if(a.length<1)return{j:null,s:""};for(let d=0;d<a.length-1;d++){let e=a[d];const f=a[d].endsWith("[");f&&(e=e.slice(0,-1));if(c[e]===void 0){if(b)return{j:null,s:""};c[e]=f?[]:{}}c=c[e]}return{j:c,s:a[a.length-1]}}
function Ja(a){if(a==="")a=document.createElement("div"),a.style.display="inline";else{const [c,b]=a.split("|");a=document.createElement(c.trim());b&&(a.style.cssText=b)}return a}function va(a){a=a.getRootNode();return a instanceof ShadowRoot?a.host:null}function Ka(a,c,b){const d=b.H;var e=d.p;const f=d.i;a=d.f.call(null,a,c);a!==e[f]&&(e[f]=a,e=e.join(""),b.j.value!==e&&(b.j.value=e))}
function La(a,c){c=c.match(/[^.[\]]+/g)||[];for(let b=0;b<c.length;b++){const d=c[b];if(!Object.hasOwnProperty.call(a,d))return;a=a[d]}return a};function Ma(a,c,b){const d={target:a,path:c,v:b,K:void 0},e=Array.isArray(a);e&&!d.v[O]&&(d.v[O]=[]);let f=!1;return new Proxy(a,{set(g,l,k){var r=String(l);const t=d.v[M];if(t){let x;if((x=t[l])!==void 0){if(x.h===null)return console.error("proxy set: linker(null fun): read-only var",d.path+"."+r),!0;if(!x.J)return console.error('proxy set: one way linker, use "data-pm:" or events',d.path+"."+r),!0;r=x.h.call(null,x.g[J]);r[x.F]!==k&&(r[x.F]=k);return!0}if(!((x=t[da])===void 0||x.O&&x.O.includes(r)))return g=
x.g[J],g[r]!==k&&(g[r]=k),!0}g[l]=k;if(f)return!0;if(e){if(r==="length"||Ha(r))f=!0,ja(g,d.v,""),Promise.resolve().then(()=>{f=!1});return!0}k=d.v[r]??(d.v[r]=ta(d.v));Object.hasOwnProperty.call(k,J)&&(k[J]=g[l],ja(g[l],k,r));return!0},get(g,l){if(l===w)return d;const k=String(l);let r=g[l];if(r===void 0){var t=d.v[M];if(t){if((g=t[k])!==void 0){if(g.h===null)return g.F;l=g.h.call(null,g.g[J]);if(g.J)return l[g.F];l=l[w];l.K||(l.K=Na(l));return l.K[g.F]}if(!((g=t[da])===void 0||g.O&&g.O.includes(k)))return g.g[J]?.[l]}}else r===
null||typeof r!=="object"||r[w]||(t=e?d.v[O]:d.v,t=t[k]??(t[k]=ta(d.v)),r=Ma(r,d.path+"."+k,t),g[l]=t[J]=r);return r},deleteProperty(g,l){const k=String(l);e&&Ha(k)&&g.hasOwnProperty(k)&&!f&&(f=!0,ja(g,d.v,""),Promise.resolve().then(()=>{f=!1}));return delete g[l]}})}const Oa=new Set("push pop unshift shift splice sort reverse fill copyWithin".split(" "));function Pa(){}
function Na(a){const c=Array.isArray(a.target);return new Proxy(a.target,{set(b,d){console.error('read-only proxy(set): use "data-pm:" or events, cannot set read-only var',a.path+"["+String(d)+"]");return!0},get(b,d){if(d===w)return a;var e=String(d);let f=b[d];if(f===void 0){var g=a.v[M];if(g){if((b=g[e])!==void 0){if(b.h===null)return b.F;d=b.h.call(null,b.g[J])[w];d.K||(d.K=Na(d));return d.K[b.F]}if(!((b=g[da])===void 0||b.O&&b.O.includes(e)))return b.g[J]?.[d]}}else if(f!==null&&typeof f==="object")g=
f[w],g||(g=c?a.v[O]:a.v,g=g[e]??(g[e]=ta(a.v)),e=Ma(f,a.path+"."+e,g),b[d]=g[J]=e,g=e[w]),g.K||(g.K=Na(g)),f=g.K;else if(c&&Oa.has(e))return console.error('read-only proxy(get): use "data-pm:" or events, method not available',e),Pa;return f},deleteProperty(b,d){console.error('read-only proxy(delete): use "data-pm:" or events, delete not allowed on path',a.path+"["+String(d)+"]");return!1}})};function Qa(a,c){let b=a.id;if(c.has(b))return console.error("initTemplate: template already exist with, using cached id",b),c.get(b);var d=a.content.querySelectorAll("script"),e;d.length>0&&(d.length!==1?console.error("template has more than one script tag, templateId:",b,"(initTemplate)"):e=(new Function('"use strict";'+d[0].textContent+';return{create:typeof create==="function"?create:null,kill:typeof kill==="function"?kill:null}')).call(null),d.forEach(r=>r.remove()));if(d=a.getAttribute("data-wrap")){d=
document.createElement(d);d.appendChild(a.content.cloneNode(!0));var f=a.attributes;for(var g=0;g<f.length;g++){var l=f[g],k=l.name;["data-wrap","id"].indexOf(k)===-1&&d.setAttribute(k,l.value)}}else{d=a.content;f=0;for(g=d.firstChild;g&&!(f>1);){if(g.nodeType===Node.TEXT_NODE){if(g.nodeValue?.trim()){f=0;break}}else f++;g=g.nextSibling}if(f===1&&d.firstElementChild)for(d=d.firstElementChild.cloneNode(!0),f=a.attributes,g=0;g<f.length;g++)l=f[g],k=l.name,k.startsWith("data-p:")&&d.setAttribute(k,
l.value);else throw Error('initTemplate: templates must have exactly one Element child or "data-wrap" attr');}a.remove();a=d.querySelectorAll("template");f=d[z]??(d[z]={});e&&(f.N=e);for(e=a.length-1;e>=0;e--)g=a[e],g.hasAttribute("id")&&!g.hasAttribute("shadowrootmode")&&(f.P||(f.P=new Map),Qa(g,f.P));c.set(b,d);return d}
function Ra(a,c,b,d){if(a.tagName.startsWith("R-")){if(c===null)throw Error("applyTemplate: cache is null");c=Sa(a,c,b,d);if(!c)return null;a.hasAttribute("data-shadow")?(d=Ja(a.getAttribute("data-shadow")),d.attachShadow({mode:"open"}).appendChild(c)):d=c;b?b.after(d):a.before(d);a.remove();return c}if(!b)return console.error("applyTemplate: inline template: anchor is not defined"),null;a=a.cloneNode(!0);b.after(a);a[z]={I:3};return a}
function Sa(a,c,b,d){var e=a.tagName.slice(2).toLowerCase();if(d=d?.get(e)??c.get(e))c=d;else{d=document.getElementById(e);if(!d||d.tagName!=="TEMPLATE")throw Error("applyTemplate: template not found, templateId: "+e);c=Qa(d,c)}for(b=b?.parentElement||a.parentElement;b&&b[z]?.I!==1;b=b.parentElement||va(b))if(b[z]?.ia===e)return console.error("applyTemplate: infinite template recursion detected, templateId:",e),null;b=c.cloneNode(!0);d=[];const f=a.attributes;for(let g=0;g<f.length;g++){const l=f[g],
k=l.name;k.startsWith("data-p:")?b.removeAttribute("data-pm:"+k.substring(7)):k.startsWith("data-pm:")?b.removeAttribute("data-p:"+k.substring(8)):d.push(k);b.setAttribute(k,l.value)}b[z]={ia:e,I:2,ea:d};c[z]?.P&&(b[z].P=c[z].P);if(a.textContent.trim()!==""&&b.getElementsByTagName("slot").length>0){for(e=document.createDocumentFragment();a.firstChild;)e.appendChild(a.firstChild);a[z]={V:e};b[z].L={g:null,V:e}}else a[z]?.V&&(b[z].L={g:null,V:a[z].V});c[z].N&&(b[z].N=c[z].N);return b};function Ta(a,c,b,d){a=b.j;if(a[ea])if(b=d?.[w]?.target??a[ea]?.h(b.g)?.[w].target??d,Array.isArray(b)&&b.length!==0){if(d=Ua(a),d.length>0){c=new Map;let x=!1;const D=a[O];var e=null;for(let h=0,m=b.length;h<m;h++)if(b.hasOwnProperty(h)){var f=b[h],g=D[h];if(g){var l=g[J];if(l===f){a:{l=c;var k=h,r=l.get(f);if(r)for(let n=0,y=r.length;n<y;n++){var t=r[n];if(Math.abs(t)===k){r.splice(n,1);r.length===0&&l.delete(f);l=t<0;break a}}l=!1}if(l)Va(e,h,g,a,d);else if(!g[L]||g[L].length!==d.length)a:for(f=
g,l=h,f=f[L]??(f[L]=[]),k=0;k<d.length;k++){r=d[k];t=r.g;for(let n=0;n<f.length;n++)if(f[n][L].ca===t)continue a;Wa(e,k,r.H.anchor).after(Xa(l,a,r))}e=g}else if(x||(Ya(c,D,h),x=!0),f=Za(c,f),f!==void 0)if(l=Math.abs(f),l===h)f<0&&Va(e,h,g,a,d),e=g;else{f=D[l];if(!f)throw Error("List.doSync: nodeForValue is undefined, indexOfNodeForValue: "+l);ab(c,g[J],h,-l);D[l]=g;Va(e,h,f,a,d);e=D[h]=f}else D.push(g),ab(c,l,h,-(D.length-1)),e=bb(e,h,a,d)}else x||(Ya(c,D,h+1),x=!0),g=Za(c,f),g!==void 0?(g=Math.abs(g),
l=D[g],delete D[g],Va(e,h,l,a,d),e=l):e=bb(e,h,a,d)}else if(g=D[h])delete D[h],D.push(g),ab(c,g[J],h,-(D.length-1));if(D.length>b.length)for(let h=D.length-1,m=b.length-1;h>m;h--)D.hasOwnProperty(h)&&cb(D[h],d),D.splice(h,1)}}else if(b=a[O])for(a=Ua(a),d=b.length-1;d>=0;d--)b.hasOwnProperty(d)&&cb(b[d],a),b.pop()}
function bb(a,c,b,d){const e=Object.assign(ta(b),{[L]:[]});b[O][c]=e;e[J]=b[J]?.[c]??null;var f=b[J]?.[c]?.[w];f&&(f.v!==e&&(f.v=e),f.path=b[J]?.[w].path+"."+c);for(let g=0,l=d.length;g<l;g++)f=d[g],Wa(a,g,f.H.anchor).after(Xa(c,b,f));return e}
function Xa(a,c,b){var d=b.H;const e=d.Z.cloneNode(!0);e[z]=d.Z[z];var f=c[O][a];b=b.g;const g=Ga(e,b,!0);g[L].ca=b;const l=g[L].path,k=d.ba,r=k[0].name;var t=k[1].name,x=g[M]={[r]:{g:c,h:h=>h,F:a,J:k[0].type===2}};const D={};t&&(x[t]={g,h:null,F:a,J:!1},D[t]=void 0);if(d.Z[z].I===3)g[M][da]={g:b,h:()=>{},F:"",J:!0,O:t?[r,t]:[r]};else for(a=b[L].path,d=2;d<k.length;d++){t=k[d];x=t.o;if(t.type===4){D[t.name]=x;continue}const h=sa(b,x);if(h){const m=t.name,n=g[M]??(g[M]={}),y=x.lastIndexOf(".");n[m]=
{g:b,h:new Function(a,"return "+a+(y===-1?"":"."+x.substring(0,y))),F:x.substring(y+1),J:t.type===2};g[m]=h}else console.error("List.createAndLinkElement: missing linkToNode: cannot bind to expression",x)}g[r]=f;f[L].push(g);g[J]=Ma(D,l,g);(f=e[z].N?.create)&&S(f,e,null,g[J],g[P]);c[ea].ha(g,e,!1,b);oa(g);return e}
function Va(a,c,b,d,e){var f=d[J]?.[c];if(f){var g=f[w];g&&(f[w].v=b,g.path=d[J]?.[w].path+"."+c);b[J]=f}else b[J]=null;d[O][c]=b;b=b[L];for(let k=0,r=b.length;k<r;k++){g=b[k];f=g[L];d=e[k].H;const t=g[M];if(t){var l=d.ba;t[l[0].name].F=c;if(l=l[1].name)if(t[l].F=c,g=g[l]?.[B])for(const x of g)ma(x,c)}(f=f.D)&&Wa(a,k,d.anchor).after(f)}}function cb(a,c){if(a=a[L]){for(let b=0,d=a.length;b<d;b++)ua(a[b],c[b].g);a.length=0}}
function Ya(a,c,b){for(let d=b,e=c.length;d<e;d++)if(b=c[d])b=b[J],a.get(b)?.push(d)??a.set(b,[d])}function Za(a,c){const b=a.get(c);if(b){const d=b.pop();b.length===0&&a.delete(c);return d}}function ab(a,c,b,d){const e=a.get(c);if(e){for(let f=0,g=e.length;f<g;f++)if(Math.abs(e[f])===b){e[f]=d;return}e.push(d)}else a.set(c,[d])}function Ua(a){const c=[];if(a=a[B])for(const b of a)b&&b.u===5&&c.push(b);return c}function Wa(a,c,b){return a?a[L][c]?.[L].D??b:b};function db(a,c,b){const d=b[L].path;c=Z(c);const {A:e,h:f}=Y(c,d,4);if(e.l.length!==1||e.l[0]!==c)console.error('data-m: only "simple" vars are supported: invalid varName:',c,"(text input)");else if(U({j:a,s:"value",u:1,m:1,update:f,G:W,C:"",g:b,B:new Set},b,e.l),eb(c,b))a.readOnly=!0,a.addEventListener("keydown",fb);else{var g=new Function(d,"$r","_v",`${e.o}=_v`);a.addEventListener("input",l=>{S(g,a,null,b[J],b[P],l.currentTarget.value)})}}
function gb(a,c,b){c=Z(c);let d=!1;c.endsWith("[]")&&(d=!0,c=c.slice(0,-2));const e=b[L].path,f=Y(c,e,2,"_chb_m_"+e+"_"+d),g=f.A;if(g.l.length!==1||g.l[0]!==c)console.error('data-m: only "simple" vars are supported: invalid varName:',c,"(checkbox)");else{if(!f.h){const t=new Function(e,"$r",`return ${g.o}`);f.h=d?function(x,D,h){x=t.call(null,x,D);return Array.isArray(x)&&x.includes(h.H[0])}:function(x,D,h){return t.call(null,x,D)===h.H[0]}}a.hasAttribute("name")||(a.name=c);var l=[!0,!1];if(a.hasAttribute("value")){var k=
a.value;k.trim().startsWith("{{")?({h:k}=Y(Z(k),e,4),k=k.call(null,b[J],b[P]),Array.isArray(k)?(k.hasOwnProperty(0)&&(l[0]=k[0]),k.hasOwnProperty(1)&&(l[1]=k[1])):l[0]=k):l[0]=(new Function("return "+Z(k)))()}a.value=l[0];k=La(b[J],c);a.checked=k!==void 0?d?Array.isArray(k)&&k.includes(l[0]):k===l[0]:!1;U({j:a,s:"checked",u:1,m:1,H:l,update:f.h,G:W,C:a.checked,g:b,B:new Set},b,g.l);if(eb(c,b))a.addEventListener("click",fb),a.addEventListener("keydown",fb);else{var r=d?new Function(e,"$r","_checked",
"_v","_fun",`if(!_fun(${g.o},_checked,_v)){${g.o}=[_v]}`):new Function(e,"$r","_v",`${g.o} = _v`);a.addEventListener("change",t=>{t=t.currentTarget.checked;d?S(r,a,null,b[J],b[P],t,l[0],hb):S(r,a,null,b[J],b[P],l[t?0:1])})}}}
function ib(a,c,b){if(a.hasAttribute("value")){c=Z(c);var d=b[L].path,e=Y(c,d,2,"_r_r_m+"+d),f=e.A;if(f.l.length!==1||f.l[0]!==c)console.error('data-m: only "simple" vars are supported: invalid varName:',c,"(radio)");else{if(!e.h){const r=new Function(d,"$r",`return ${f.o}`);e.h=function(t,x,D){return r.call(null,t,x)===D.H}}var g=a.value;if(g.trim().startsWith("{{")){var {h:l}=Y(Z(g),d,4);g=l.call(null,b[J],b[P]);a.value=g}else g=a.value;a.hasAttribute("name")||(a.name=c);l=La(b[J],c);a.checked=
l===g;U({j:a,s:"checked",u:1,m:1,H:g,update:e.h,G:W,C:a.checked,g:b,B:new Set},b,f.l);if(eb(c,b))a.addEventListener("click",fb),a.addEventListener("keydown",fb);else{var k=new Function(d,"$r","_v",`${f.o} = _v`);a.addEventListener("change",()=>{S(k,a,null,b[J],b[P],g)})}}}else console.error('initRadio: element missing "value" attr',a)}
function jb(a,c,b){const d=a.hasAttribute("multiple");var e=b[L].path;c=Z(c);const f=Y(c,e,2,"_sel_m_"+e+"_"+d),g=f.A;if(g.l.length!==1||g.l[0]!==c)console.error('data-m: only "simple" vars are supported: invalid varName:',c,"(select)");else{var l=d?new Function(e,"$r",`if(!Array.isArray(${g.o})){${g.o}=[]}return ${g.o}`):new Function(e,"$r","_v",`${g.o}=_v`);f.h||(f.h=d?function(k,r,t){k=l.call(null,k,r);t=t.j.options;k=Array.isArray(k)?k:[k];for(let x=0,D=t.length;x<D;x++){r=t[x];const h=r.value;
r.selected?k.includes(h)||(r.selected=!1):k.includes(h)&&(r.selected=!0)}}:new Function(e,"$r",`return ${g.o}`));e=S(new Function(e,"$r",`return ${g.o}`),a,null,b[J],b[P]);a.value=e;U({j:a,s:d?"":"value",u:1,m:1,update:f.h,G:W,C:e,g:b,B:new Set},b,g.l);eb(c,b)?(a.addEventListener("mousedown",fb),a.addEventListener("keydown",fb)):a.addEventListener("change",k=>{k=k.currentTarget.options;if(d){var r=S(l,a,null,b[J],b[P])??[];for(let x=0,D=k.length;x<D;x++){var t=k[x];const h=t.value;t.selected?r.includes(h)||
r.push(h):(t=r.indexOf(h),t!==-1&&r.splice(t,1))}}else for(let x=0,D=k.length;x<D;x++)if(r=k[x],r.selected){S(l,a,null,b[J],b[P],r.value);break}})}}function hb(a,c,b){if(c)if(Array.isArray(a))a.push(b);else return!1;else Array.isArray(a)&&(c=a.indexOf(b),c!==-1&&a.splice(c,1));return!0}function fb(a){console.error('model(read-only): use "data-pm:" or events, cannot update "data-m" prop:',a.currentTarget.getAttribute("data-m"));a.preventDefault();a.stopPropagation();return!1}
function eb(a,c){return(a=c[M]&&c[M][(a.match(/[^.[\]]+/g)||[])[0]||""])?!a.J:!1};const kb=new Set(["data-r","data-m","data-v","data-err"]);
function lb(a,c){function b(h,m,n=!1,y){const u=document.createNodeIterator(m,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);n&&u.nextNode();n=h[L].path;const E=m[z]?.P;for(var p=u.nextNode();p!==null;p=u.nextNode())if(p.nodeType===Node.TEXT_NODE){var v=p.nodeValue.indexOf("{{");if(v>-1){var q=p.nodeValue.indexOf("}}",v+2);if(q===-1)throw Error("initGraph: invalid textNode: missing closing anchor, node.nodeValue: "+p.nodeValue);v>0&&(p=p.splitText(v),u.nextNode(),q-=v,v=0);q+2<p.nodeValue.length+v&&
p.splitText(q+2);const {A:I,h:N}=Y(p.nodeValue.slice(2,-2),n,4);U({j:p,s:"nodeValue",u:1,m:1,C:"",update:N,G:W,g:h,B:new Set},h,I.l)}}else if(v=p.tagName,v==="TEMPLATE")p.hasAttribute("id")||p.hasAttribute("shadowrootmode")?Qa(p,D):console.warn('initGraph: template has "shadowrootmode" or no "id" attribute, skipped:',p);else{if(p.hasAttribute("data-err")){q=y&&p===m?y:h;var A=q[L].path,C=Y(Z(p.getAttribute("data-err")),A,2,"__r_err");C.h||(C.h=new Function(A,"$r","$err",C.A.o));(p[z]??(p[z]={})).aa=
{g:q,h:C.h}}if(p.hasAttribute("data-exec")&&(q=Y(Z(p.getAttribute("data-exec")),n,3),p.removeAttribute("data-exec"),ya(h,p,q),!p.parentElement))continue;p.hasAttribute("data-exec.async")&&(q=Y(Z(p.getAttribute("data-exec.async")),n,2,"__r_exa"),q.h||(q.h=new Ba(n,"$r",q.A.o)),p.removeAttribute("data-exec.async"),ya(h,p,q));if(v==="SLOT"&&m[z].L)v=h,q=m[z].L,q.g?(A=q.V.cloneNode(!0),C=q.g[B],q.g[B]=v[B],b(q.g,A),q.g[B]=C,p.before(A),p.remove()):console.error("setSlot: slotData.graph is null");else if(v.startsWith("R-"))v=
v.slice(2).toLowerCase(),p.hasAttribute("data-if")?d(p,p.getAttribute("data-if"),h,v,E):p.hasAttribute("data-f")?f(p,h,E):(p=Ra(p,D,void 0,E))&&g(p,h);else if(v=p.getAttribute("data-if"))d(p,v,h);else if(p.getAttribute("data-f"))f(p,h);else{if(v=p.getAttribute("data-r"))if(q=p,A=h,v=Z(v),v.startsWith("$r.")){C=v.substring(3);var {A:F}=Y(C,A[L].path);if(F.l.length!==1||F.l[0]!==C)console.error("setRef: ref must be a simple var, got:",v);else{var {j:T,s:X}=wa(C,A[P]);T===null?console.error("setRef: can not ensure path for varName:",
v):(q=za(q),A=A[L],A.D&&3===A.D[z].I&&(A.T??(A.T=new Map)).set(v,q),T[X]=q)}}else console.error('setRef: varName must start with "$r.", got:',v);if(v=p.getAttribute("data-m")){if(p.tagName==="SELECT"&&p.childElementCount>0){if(q=p.lastElementChild)for(;u.nextNode()!==q;);b(h,p,!0)}q=p;A=v;C=h;switch(q.tagName){case "INPUT":switch(q.type){case "checkbox":gb(q,A,C);break;case "radio":ib(q,A,C);break;case "submit":case "button":case "reset":case "image":console.error("initModel: unsupported input type",
q.type);break;default:db(q,A,C)}break;case "TEXTAREA":db(q,A,C);break;case "SELECT":jb(q,A,C);break;default:console.error("initModel: unsupported tag",q.tagName)}}(v=p.getAttribute("data-v"))&&t(p,v,h);if(v=p.getAttribute("data-src"))p.removeAttribute("data-src"),p.setAttribute("src",v);for(v=p.attributes.length-1;v>=0;v--)if(q=p.attributes[v],F=q.value.trim()){var G=q.name;if(G.startsWith("data-h:")||G.startsWith("data-h."))r(p,G,F,h,!0);else if(G.startsWith("data-s:"))r(p,G,F,h,!1);else if(G.startsWith("data-l:")||
G.startsWith("data-l.async:"))k(p,G,F,y&&p===m?y:h);else if(!(!F.includes("{{")||kb.has(G)||G.startsWith("data-p:")||G.startsWith("data-pm:")||G==="value"&&p.hasAttribute("data-m"))){A=[];C=[];var K="",H=1;for(let I=0,N=F.length;I<N;I++){const V=F[I],ca=F[I+1];if(V==="{"&&ca==="{"){if(H===2){console.warn("initGraph: bad attribute, nested {{ detected in :",F);H=3;break}K&&A.push(K);K="";H=2;I++}else H===2&&V==="}"&&ca==="}"?(C.push(A.length),A.push(K.trim()),K="",H=1,I++):K+=V}switch(H){case 2:console.error("initGraph: bad attribute, unclosed {{ detected in :",
F);case 3:continue;default:K&&A.push(K)}F=y&&p===m&&p[z]?.I===2&&p[z].ea.includes(G)?y:h;G=F[L].path;if(A.length===1){const {A:I,h:N}=Y(A[0],G,4);U({j:q,s:"value",u:1,m:1,C:"",update:N,G:W,g:F,B:new Set},F,I.l,h[B])}else{for(let I=0,N=C.length;I<N;I++){K=C[I];const {A:V,h:ca}=Y(A[K],G,4);H=S(ca,p,null,F[J],F[P]);U({j:q,s:"",u:1,m:1,C:H,H:{f:ca,i:K,p:A},update:Ka,G:W,g:F,B:new Set},F,V.l,h[B]);A[K]=H}q.value=A.join("")}}}}}}function d(h,m,n,y,u){y=Z(m);const E=n[L].path;m=document.createComment(`if: ${y}`);
m[z]={P:u};h.before(m);h.removeAttribute("data-if");h.remove();const {A:p,h:v}=Y(y,E,4);h={anchor:m,W:n,ga:h,X:void 0,h:v,m:0,M:null};m.nextElementSibling?.hasAttribute("data-else")&&(u=m.nextElementSibling,u.removeAttribute("data-else"),u.remove(),h.X=u);U({j:h,s:"",u:1,m:1,update:e,G:function(){const q=this.j;q.M&&(ua(q.M,q.W),q.M=null);q.m=0},C:0,g:n,B:new Set},n,p.l)}function e(h,m,n){n=n.j;h=!!n.h.call(this,h,m)===!0?1:n.X?2:0;if(n.m!==h){n.m!==0&&n.M&&(ua(n.M,n.W),n.M=null);if(h!==0){m=Ra(h===
1?n.ga:n.X,D,n.anchor,n.anchor[z]?.P);if(!m){n.M=null;n.m=0;return}const y=n.W;m=m[z].I===3?l(m,y):g(m,y,!0);n.M=m;oa(m)}n.m=h}}function f(h,m,n){var y=h.getAttribute("data-f"),u=Z(y).split("=>");if(u.length!==2)console.error('initFor: invalid "data-f" attribute',y);else{var E=u[0].trim(),[p,v]=u[1].replace(/\s*/g,"").split(",");u=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/;if(!u.test(p)||v&&!u.test(v))console.error("initFor: invalid indexName or itemName",y);else{y=m[L].path;u=document.createComment(`for: ${E}`);
if(h.hasAttribute("data-shadow")&&h.tagName.startsWith("R-")){var q=Ja(h.getAttribute("data-shadow"));q.attachShadow({mode:"open"}).appendChild(u);h.removeAttribute("data-shadow");h.before(q)}else h.before(u);h.removeAttribute("data-f");h.remove();var {A,h:C}=Y(E,y,4),F=A.l.length;if(F===1&&A.l[0]===E){var T=sa(m,E);var X=A.l;q=m;var G=E.includes(".")?function(H){return C.call(null,H[J],H[P])}:function(H){return H[J][E]}}else{const H="l_"+Da();q=Ga(void 0,m,!0);X=[H];if(F===0){try{G=C?.call(null)}catch(I){console.error("initFor: init error",
", prop:",H,", err:",I)}q[J]=Ma({[H]:G},q[L].path,q);T=q[H]=ta(q);T[J]=q[J][H];G=function(){return T[J]}}else{const I=q[J]=Ma({[H]:null},q[L].path,q);T=sa(q,H);G={j:I,s:H,m:1,u:2,C:null,update:C,G:W,g:m,B:new Set};U(G,m,A.l,q[B]);ma(G,null);G=function(){return I[H]}}}if(T){T[ea]||(T[ea]={ha:b,h:G});G=[{name:p,type:2,o:""},{name:v,type:3,o:""}];if(h.tagName.startsWith("R-")){h.removeAttribute("data-p:"+p);h.removeAttribute("data-pm:"+p);v&&(h.removeAttribute("data-p:"+v),h.removeAttribute("data-pm:"+
v));h=Sa(h,D,u,n);if(!h)return;n=h.attributes;for(let H=0;H<n.length;H++){var K=n[H];const I=K.name,N=I.startsWith("data-p:")?1:I.startsWith("data-pm:")?2:-1;if(N===-1)continue;K=K.value;const V=Z(K),ca=I.substring(I.indexOf(":")+1);let $a=!0;if(/^\s*{{/.test(K)){const {A:Fa}=Y(V,y,4);if(Fa.l.length===1&&Fa.l[0]===V){G.push({name:Ia(ca),type:N,o:V});continue}else Fa.l.length!==0&&($a=!1)}$a?G.push({name:Ia(ca),type:4,o:(new Function("return "+V))()}):console.error("initFor: only direct bindings are supported on list templates, skipped",
I,"=",K)}}else h[z]={I:3};q!==m&&((q[M]??(q[M]={}))[da]={g:m,h:()=>{},F:"",J:!0,O:X});m={j:T,s:"",u:5,m:1,H:{ba:G,anchor:u,Z:h},update:Ta,G:W,C:null,g:q,B:new Set};U(m,q,X);F===0&&ma(m,T[J])}else console.error("initFor: cannot create arrNode",", expr:",E)}}}function g(h,m,n=!1){var y=m[L].path;const u=Ga(h,m,n),E=u[L].path,p={};var v=[];for(let X=0,G=h.attributes.length;X<G;X++){var q=h.attributes[X],A=q.name;const K=A.startsWith("data-p:")?1:A.startsWith("data-pm:")?2:-1;if(K!==-1){A=Ia(A.substring(A.indexOf(":")+
1));var C=q.value;q=Z(C);if(/^\s*{{/.test(C)){const {A:H,h:I}=Y(q,y,4);var F=H.l.length;if(F===1&&H.l[0]===q){if(C=sa(m,q)){F=u[M]??(u[M]={});const N=q.lastIndexOf(".");F[A]={g:m,h:new Function(y,"return "+y+(N===-1?"":"."+q.substring(0,N))),F:q.substring(N+1),J:K===2};u[A]=C;continue}console.error("addTemplateRunners: missing linkToNode: cannot bind to expression",q)}if(F>0){C=u[L].fa;C||(C=Ga(void 0,u,!1),C[L].path=y+"_G"+u[L].path.substring(y.length+1),u[L].fa=C);F=C[J]??(C[J]=Ma({},C[L].path,
C));F[w].target[A]=null;F={j:F,s:A,m:1,u:2,C:null,update:function(N,V){N=I.call(this,N,V);return(V=N?.[w])?V.target:N},G:W,g:m,B:new Set};U(F,m,H.l,C[B]);ma(F,null);n||(F.m=1);u[A]=C[A];p[A]=void 0;(u[M]??(u[M]={}))[A]={g:C,h:function(N){return N},F:A,J:K===2};K===2&&console.error("addTemplateRunners: cannot two-way bind to non-simple expression",q);continue}p[A]=I()}else p[A]=(new Function(`return ${q}`))();v.push(A);K===2&&console.error("addTemplateRunners: cannot two way bind to non expression",
q)}}y=u[J]=Ma(p,E,u);let T;h[z]?.N?.create&&(T=n?void 0:Object.keys(p),S(h[z].N.create,h,null,y,u[P]));b(u,h,!1,m);if(!n){for(h=0;h<v.length;h++)m=v[h],y[m]=y[m];if(T)for(let X=Object.keys(p),G=0,K=X.length;G<K;G++)v=X[G],T.includes(v)||(y[v]=p[v])}return u}function l(h,m){const n=Ga(h,m,!0),y=n[L].path;n[M]={[da]:{g:m,h:()=>{},F:"",J:!0}};!h[z].L&&m[L].D?.[z].L&&(h[z].L=m[L].D[z].L);n[J]=Ma({},y,n);b(n,h);return n}function k(h,m,n,y){var u=m.indexOf(":");u=u>0?m.substring(u+1):m.substring(1);h.removeAttribute(m);
m=m.startsWith("data-l.async:");const E=y[L].path;n=Y(Z(n),E,2,"__r_l"+(m?"_a":""));n.h||(n.h=m?new Ba(E,"$r","_","$evt",n.A.o):new Function(E,"$r","_","$evt",n.A.o));const p={j:h,s:"",u:4,m:1,C:"",update:n.h,G:()=>{},g:y,B:new Set};h.addEventListener(u,v=>{ma(p,v)})}function r(h,m,n,y,u){const E=m.substring(m.indexOf(":")+1).replace(/-./g,A=>A[1].toUpperCase());if(E){var p=y[L].path;n=Z(n);var {A:v,h:q}=Y(n,p,4);if(u){if(m.startsWith("data-h:"))u=h[E];else if(m.startsWith("data-h.n:"))u=+h[E];else if(m.startsWith("data-h.b:"))u=
h[E]==="true"?!0:!1;else if(m.startsWith("data-h.s:"))u=""+h[E];else{console.error("addSetter: invalid cast:",m);return}if(v.l.length!==1||v.l[0]!==n){console.error("addSetter: invalid(non-simple) expression:",n);return}({j:m}=wa(n,y[J]));if(m===null){console.error("addSetter: invalid path:",n);return}S(new Function(p,"$r","_v",`${v.o}=_v`),h,null,y[J],y[P],u)}else h[E]=u=S(q,h,null,y[J],y[P]),h.removeAttribute(m);U({j:h,s:E,u:1,m:1,C:u,update:q,G:W,g:y,B:new Set},y,v.l)}else console.error("addSetter: invalid prop:",
m)}function t(h,m,n){const y=n[L].path;m=Z(m);const {A:u,h:E}=Y(m,y,4);if(u.l.length!==1||u.l[0]!==m)console.error('initView: only "simple" vars are supported: invalid varName:',m);else{h.removeAttribute("data-v");h.hasAttribute("data-shadow")&&h.attachShadow({mode:"open"});h[z]={I:4};var p={j:{da:h,S:null,h:E},s:"",u:1,m:1,C:h.innerHTML,update:x,G:function(){const v=this.j;v.S&&(ua(v.S,this.g),v.S=null);v.da.innerHTML=p.C;v.S=null},g:n,B:new Set};U(p,n,u.l)}}function x(h,m,n){const y=n.j;var u=y.h.call(null,
h,m);if(u&&Object.prototype.hasOwnProperty.call(u,"html")&&Object.prototype.hasOwnProperty.call(u,"state")){h=y.da;if(y.S)ua(y.S,n.g);else for(m=h.shadowRoot??h;m.lastChild;)m.removeChild(m.lastChild);m=document.createElement("template");m.innerHTML=u.html;m=m.content;var E=m.querySelectorAll("script"),p;E.length>0&&(E.length!==1?console.error("template has more than one script tag, templateId:"," [view data]"):p=(new Function('"use strict";'+E[0].textContent+';return{create:typeof create==="function"?create:null,kill:typeof kill==="function"?kill:null}')).call(null),
E.forEach(C=>C.remove()));E=u.readOnly!==!0;n=Ga(h,n.g,!0);n[J]=Ma({},n[L].path,n);u=u.state;var v=u[w].v,q={},A=function(C){return C};for(const C in u)u.hasOwnProperty(C)&&(q[C]={g:v,h:A,F:C,J:E},n[C]=v[C]=ta(v));n[M]=q;p&&(h[z].N=p,p.create&&S(p.create,h,null,n[J],n[P]));b(n,m);oa(n);(h.shadowRoot??h).appendChild(m);y.S=n}else console.error('updateData: view data must have "html" and "state" properties, got:',u),n.G()}const D=new Map;b(a,c)};export const R=function(a,c={},b,d){if(c===null||typeof c!=="object")throw Error("initial state must be an object");const e=Da();a[z]={I:1};const f={[J]:null,[L]:{path:e,U:[],D:a}};f[P]=xa(d?{global:{},local:d}:{global:{}},a,f,!1);c=f[J]=Ma(c,e,f);b&&typeof b==="function"&&S(b,a,null,c,f[P]);lb(f,a);ja(c,f,e);a.hasAttribute("hidden")&&a.removeAttribute("hidden");return c};
