const y=Symbol("ps"),aa=Symbol("pks"),A=Symbol("ed"),D=Symbol("gr"),K=Symbol("gx"),ba=Symbol("gpr"),L=Symbol("gd"),N=Symbol("gl"),da=Symbol("glw"),O=Symbol("ga"),ea=Symbol("gai"),P=Symbol("gr"),fa=Symbol("mn");let ha=!1;const ia=new Map,ja=new Map;let S=null;
function ka(a,c,b,d=!1){la();var f=c[D];if(f)for(const h of f)h&&(h===S||(h.u===5?ia:ja).set(h,a));else if(f===null)return;f=a!==null&&typeof a==="object";for(var e in c)f&&Object.prototype.hasOwnProperty.call(a,e)?ka(a[e],c[e],e,!0):ma(c[e]);if(!d){b===""?d=c[K]?.[y]?.path.split(".")??[]:(d=c[ba]?.[K]?.[y]?.path.split(".")??[],d.push(b));e=d.length-1;for(let h=c[ba],k=e;h&&h[ba];h=h[ba],k--){if(h[O])for(let l=k,u=h[d[l]];u&&l<=e;u=u[d[++l]])l===e&&ka(a,u,b,!0);if(c=h[D]){f=h[K]?.[y].path+".";for(const l of c)if(l.u===
2||l.Z&&l.Z.has(f))l===S||(l.u===5?ia:ja).set(l,null)}}}}function na(a,c){if(a!==S)if(S===null)oa(a,c);else{var b=S;S=a;(a.u===5?ia:ja).delete(a);oa(a,c);S=b}}function pa(a){if(a=a[D])for(const c of a)c.o===1&&na(c,null)}function oa(a,c){let b;try{b=a.update.call(a.u===4?a.j:null,a.g[K],a.g[P],a,c),b instanceof Promise&&b.catch(f=>{qa(f,a)})}catch(f){qa(f,a);return}c=a.s;if(c!==""){var d;if(a.o===1||(a.H===fa?(d=a.j[c],(d===""?"":+d||0)!==b):a.j[c]!==b))a.o=3,a.j[c]=b}}
function T(a,c,b,...d){let f;try{f=a.call(b,...d),f instanceof Promise&&(f=f.catch(e=>{qa(e,c)}))}catch(e){qa(e,c)}return f}
function U(a,c,b,d){if(b.length>0){const e=ra(c,b);if(e.g!==c){if(!e.aa)return U(a,e.g,b,d??c[D]);var f=U(a,e.g,e.aa,d??c[D]);b=e.l}for(let h=0,k=b.length;h<k;h++)f=b[h],f[f.length-1]==="["&&((a.Z??(a.Z=new Set)).add(c[L].path+"."+f.replace(/\[|\]/g,l=>l==="["?".":"")),f=f.slice(0,-1)),f=sa(c,f),f[D].add(a),a.B&&a.B.add(f);(c=d??c[D])&&c.add(a);a.u!==2&&a.j&&a.s!==""&&a.j[a.s]!==a.C&&(a.j[a.s]=a.C)}else oa(a,null);return f}function ta(a,c){const b=ra(a,[c]);return b.g!==a?ta(b.g,c):sa(a,c)}
function sa(a,c){let b=a;c[c.length-1]==="["&&(c=c.slice(0,-1));const d=c.match(/[^.[\]]+/g)||[];for(let e=0;e<d.length;e++){const h=d[e];if(b[h]===void 0){var f=b[K];if(f&&!Object.prototype.hasOwnProperty.call(f,h)&&(console.warn("W_CGN_01",c,"/",h),f=a[L].D)){const k=h.toLowerCase();(f.hasAttribute("p:"+k)||f.hasAttribute("pm:"+k))&&console.warn("possible kebab-cased to camelCased mismatch for prop",h)}b[h]=ua(b)}b=b[h]}return b}function X(){this.s!==""&&(this.j[this.s]=this.C)}
function ma(a){if(a){var c=a[D];if(c)for(const b of c)b.o>2&&(b.G(),b.o=2);a[K]&&(a[K]=null);for(const b in a)ma(a[b])}}
function va(a,c){try{a[L].D?.[A].O?.kill?.call(null,a[K],a[P])}catch(k){console.error("RNU_01",k)}var b=c[L].U;if(b)for(let k=0,l=b.length;k<l;k++)if(b[k]===a){b.splice(k,1);break}for(b=[a];b.length>0;){var d=b.pop(),f=d[D];if(f)for(var e of f){if(e.u===5){f=e.j;const k=f[O];if(k){for(let l=k.length-1;l>=0;l--)if(k.hasOwnProperty(l)){const u=k[l][L];for(let r=u.length-1;r>=0;r--){const v=u[r];v[L].ea===d&&(va(v,d),u.splice(r,1))}u.length===0&&k.pop()}k.length===0&&(f[ea]=void 0)}}if(e.B){for(var h of e.B)(f=
h[D])&&f.delete(e);e.B.clear()}(e.u===5?ia:ja).delete(e)}(d=d[L]?.U)&&b.push(...d)}a[N]=void 0;a[D]=void 0;a[K]=null;a[ba]=void 0;e=a[L];if(!e)console.warn("W_KT_01");else if(e.D){b=e.D;h=wa(b);d=b[A].I;if(d!==4){if(d===3&&e.T){for(const [k,l]of e.T){if(k[0]==="$"){const {j:u,s:r}=xa(k.substring(3),c[P],!0);u&&u[r]===l&&(u[r]=void 0)}l[aa]=!0}e.T.clear()}b[A]=void 0;b.remove()}else for(b[A]={I:d},c=b.shadowRoot??b;c.lastChild;)c.removeChild(c.lastChild);e.D=void 0;h&&h.remove()}a[L]=void 0}
function la(){ha||(Promise.resolve().then(()=>{do{for(const c of ia){var a=c[0];S=a;ia.delete(a);oa(a,c[1])}for(const c of ja)if(S=a=c[0],ja.delete(a),oa(a,c[1]),ia.size>0)break}while(ia.size>0||ja.size>0);ha=!1;S=null}),ha=!0)}function ra(a,c){const b=a[N]?.[da];if(b){var d=b.L;if(d){const f=[],e=[],[h,k]=d;for(d=0;d<c.length;d++){const l=c[d];(l===h||l===k||l.startsWith(h+".")||l.startsWith(h+"[")?e:f).push(l)}if(f.length>0)return{g:b.g,l:e,aa:f}}else a=b.g}return{g:a,l:c,aa:void 0}}
function qa(a,c){console.error("RNU_02",a);const b=a instanceof Error?a:Error(typeof a==="string"?a:"unknown error",{cause:a});if(c instanceof Element)var d=c;else if(c.j){var f=c.j;f instanceof Element?d=f:f instanceof Text?d=f.parentElement:f.ownerElement&&(d=f.ownerElement);if(!d)if(f=c.g[L],f.D)d=f.D;else for(let e=0,h=f.U.length;e<h;e++){const k=f.U[e][L];if(k.D){d=k.D.parentElement;break}}}if(!d)throw console.error("RNU_03",c),b;for(c=!1;d;){if(d.nodeType===Node.ELEMENT_NODE&&d.hasAttribute("error")){d[A].ba&&
(d=d[A].ba,d.h.call(null,d.g[K],d.g[P],b),c=!0);break}if(d[A]?.I===1)break;d=d.parentElement||wa(d)}if(!c)throw a;}
function ya(a,c,b,d=!1){let f,e;return new Proxy(a,{get(h,k){return k==="emit"?(f||(f=c?function(l,u,r=!1){r=r===!0;c.dispatchEvent(new CustomEvent(l,{detail:u,bubbles:r,composed:r}))}:a.global.emit),f):k==="watch"?(e||(e=function(l,u,r){const v=Y(Z(l),b[L].path,4);U({j:null,s:"",u:1,o:1,H:r,update:function(B,g,m){m.H===!1?m.H=!0:u(v.h.call(null,B,g))},G:X,C:void 0,g:b,B:new Set},b,v.A.l)}),e):h.local?.[k]??(d?void 0:h.global[k])},set(h,k,l){h.local||(h.local={});h.local[k]=l;return!0}})}
function za(a,c,b){let d=/\bthis\b/.test(b.A.m)?Aa(c):null;const f=a[L];d&&f.D&&3===f.D[A].I&&(f.T??(f.T=new Map)).set(Math.random().toString(36),d);T(b.h,c,d,a[K],a[P])}
function Aa(a){let c=a;return new Proxy({},{get(b,d){if(d==="__raw")return c;Ba(c);const f=c[d];return typeof f==="function"?function(...e){return f.apply(c,e)}:f},set(b,d,f){if(d===aa)return c=void 0,!0;Ba(c);c[d]=f;return!0},has(b,d){Ba(c);return d in c},deleteProperty(b,d){Ba(c);return delete c[d]},ownKeys(){Ba(c);return Reflect.ownKeys(c)},getOwnPropertyDescriptor(b,d){Ba(c);return Reflect.getOwnPropertyDescriptor(c,d)},getPrototypeOf(){Ba(c);return Object.getPrototypeOf(c)}})}
function Ba(a){if(!a)throw ReferenceError("element is not defined");};const Ca=Object.getPrototypeOf(async function(){}).constructor;let Da=0;function Ea(){let a="",c=Da++;do{const b=c%52;a=String.fromCharCode(b+(b<26?97:39))+a;c=Math.floor(c/52)-1}while(c>=0);return a}function Z(a){return/^\s*{{/.test(a)?a.replace(/^\s*{{\s*|\s*}}\s*$/g,""):a.trim()!==""&&Number.isFinite(+a)?a:"'"+a.replace(/'/g,"\\'")+"'"}const Ga=new Map;
function Y(a,c,b=1,d=""){d=c+a+d+b;var f=Ga.get(d);if(!f){f=c;const k=a.length;if(k>512)throw Error("EXPR_LENGTH");let l="";const u=new Set;f+=f?".":"";for(let r=0,v=0,B="",g="",m=!1;r<=k;r++){var e=k!==r?a[r]:"";if(v===0)e==='"'||e==="'"||e==="`"?(v=1,B=e,l+=e):/[a-zA-Z_$]/.test(e)?(v=2,g=e):e==="]"||e===")"?(v=3,g=e):(e==="{"?(m=!0,v=1,B=":"):e==="}"?m=!1:m&&e===","&&(v=1,B=":"),l+=e);else if(v===1){if(e===B)v=0;else if(m&&e==="."&&(a[r+1]||"")==="."&&(a[r+2]||"")===".")v=0,r+=2,l+="..";else if(e===
"\\"){l+=e+(a[r+1]||"\\");r++;continue}l+=e}else if(/[\w.$\d]/.test(e))g+=e;else if(e==="?"&&(a[r+1]||"")===".")g+=e;else{if(e==="["||e==="("){if(g+=e,e=a.substring(r+1).match(/^\s*(?:\d+|'(?:0x[0-9a-fA-F]+|[0-9]+)'|"(?:0x[0-9a-fA-F]+|[0-9]+)")\s*\]/)){g+=e[0];r+=e[0].length;continue}}else--r;if(g==="true"||g==="false"||g==="null"||g==="undefined"||g==="void"||g==="this"||g==="$evt"||g==="$err"||g==="await"||g==="return"||g.startsWith("$r.")||g.startsWith("$err.")||g.startsWith("$evt.")||g.startsWith("this.")||
g.startsWith("void("))l+=g;else{e=g;var h=v===3||/[\])]/.test(g[0])||/[[(]/.test(g[g.length-1]);const n=e.replace(/\s*/g,"").replace(/\?\./g,"."),w=n[0];let t=-1;h?(w!=="]"&&w!==")"&&(l+=f,n[n.length-1]==="("&&(t=n.lastIndexOf("."))),w!=="]"&&n[n.length-1]==="["&&(u.delete(n.slice(0,-1)),u.add(n))):(u.add(n),l+=f);t!==-1&&u.add(n.substring(0,t));l+=e}v=0}}f={m:l,l:Array.from(u),la:[]};f={A:f,h:b>2?new (/^\s*await\b/.test(a)?Ca:Function)(c,"$r",(b===3?"":"return ")+f.m):null};b>1&&Ga.set(d,f)}return f}
function Ha(a,c,b){const d=c[L];b={[L]:{path:d.path+"_"+Ea(),D:a,U:[]},[D]:b?new Set:c[D],[K]:null};const f=a?.[A];b[P]=f&&f.I===3?c[P]:ya({global:c[P]},a,b,a?.hasAttribute("no-refs"));f&&f.M&&(f.M.g=c);d.U.push(b);return b}function ua(a){return{[D]:new Set,[ba]:a,[K]:null}}function Ia(a){if(!a)return!1;const c=a.length;for(let b=0;b<c;b++){const d=a.charCodeAt(b);if(d<48||d>57)return!1}return c===1||a[0]!=="0"}function Ja(a){return a.replace(/-./g,c=>c.toUpperCase()[1])}
function xa(a,c,b=!1){a=a.replace(/\[/g,"[.").replace(/\]/g,"").split(".");if(a.length<1)return{j:null,s:""};for(let d=0;d<a.length-1;d++){let f=a[d];const e=a[d].endsWith("[");e&&(f=f.slice(0,-1));if(c[f]===void 0){if(b)return{j:null,s:""};c[f]=e?[]:{}}c=c[f]}return{j:c,s:a[a.length-1]}}function Ka(a){if(a==="")a=document.createElement("div"),a.style.display="inline";else{const [c,b]=a.split("|");a=document.createElement(c.trim());b&&(a.style.cssText=b)}return a}
function wa(a){a=a.getRootNode();return a instanceof ShadowRoot?a.host:null}function La(a,c,b){const d=b.H;var f=d.p;const e=d.i;a=d.f.call(null,a,c);a!==f[e]&&(f[e]=a,f=f.join(""),b.j.value!==f&&(b.j.value=f))}function Ma(a,c){c=c.match(/[^.[\]]+/g)||[];for(let b=0;b<c.length;b++){const d=c[b];if(!Object.hasOwnProperty.call(a,d))return;a=a[d]}return a};function Na(a,c,b){const d={target:a,path:c,v:b,K:void 0},f=Array.isArray(a);f&&!d.v[O]&&(d.v[O]=[]);let e=!1;return new Proxy(a,{set(h,k,l){var u=String(k);const r=d.v[N];if(r){let v;if((v=r[k])!==void 0){if(v.h===null)return console.error("PRX_01",d.path+"."+u),!0;if(!v.J)return console.error("PRX_02",d.path+"."+u),!0;u=v.h.call(null,v.g[K]);u[v.F]!==l&&(u[v.F]=l);return!0}if(!((v=r[da])===void 0||v.L&&v.L.includes(u)))return h=v.g[K],h[u]!==l&&(h[u]=l),!0}h[k]=l;if(e)return!0;if(f){if(u==="length"||
Ia(u))e=!0,ka(h,d.v,""),Promise.resolve().then(()=>{e=!1});return!0}l=d.v[u]??(d.v[u]=ua(d.v));Object.hasOwnProperty.call(l,K)&&(l[K]=h[k],ka(h[k],l,u));return!0},get(h,k){if(k===y)return d;const l=String(k);let u=h[k];if(u===void 0){var r=d.v[N];if(r){if((h=r[l])!==void 0){if(h.h===null)return h.F;k=h.h.call(null,h.g[K]);if(h.J)return k[h.F];k=k[y];k.K||(k.K=Oa(k));return k.K[h.F]}if(!((h=r[da])===void 0||h.L&&h.L.includes(l)))return h.g[K]?.[k]}}else u===null||typeof u!=="object"||u[y]||(r=f?d.v[O]:
d.v,r=r[l]??(r[l]=ua(d.v)),u=Na(u,d.path+"."+l,r),h[k]=r[K]=u);return u},deleteProperty(h,k){const l=String(k);f&&Ia(l)&&h.hasOwnProperty(l)&&!e&&(e=!0,ka(h,d.v,""),Promise.resolve().then(()=>{e=!1}));return delete h[k]}})}const Pa=new Set("push pop unshift shift splice sort reverse fill copyWithin".split(" "));function Qa(){}
function Oa(a){const c=Array.isArray(a.target);return new Proxy(a.target,{set(b,d){console.error("PRX_03",a.path+"["+String(d)+"]");return!0},get(b,d){if(d===y)return a;var f=String(d);let e=b[d];if(e===void 0){var h=a.v[N];if(h){if((b=h[f])!==void 0){if(b.h===null)return b.F;d=b.h.call(null,b.g[K])[y];d.K||(d.K=Oa(d));return d.K[b.F]}if(!((b=h[da])===void 0||b.L&&b.L.includes(f)))return b.g[K]?.[d]}}else if(e!==null&&typeof e==="object")h=e[y],h||(h=c?a.v[O]:a.v,h=h[f]??(h[f]=ua(a.v)),f=Na(e,a.path+
"."+f,h),b[d]=h[K]=f,h=f[y]),h.K||(h.K=Oa(h)),e=h.K;else if(c&&Pa.has(f))return console.error("PRX_04",f),Qa;return e},deleteProperty(b,d){console.error("PRX_04",a.path+"["+String(d)+"]");return!1}})};function Ra(a,c){let b=a.id;if(c.has(b))return console.error("TPL_01",b),c.get(b);var d=a.content.querySelectorAll("script"),f;d.length>0&&(d.length!==1?console.error("GEN_01",b,"(initTemplate)"):f=(new Function('"use strict";'+d[0].textContent+';return{create:typeof create==="function"?create:null,kill:typeof kill==="function"?kill:null}')).call(null),d.forEach(u=>u.remove()));if(d=a.getAttribute("wrap")){d=document.createElement(d);d.appendChild(a.content.cloneNode(!0));var e=a.attributes;for(var h=
0;h<e.length;h++){var k=e[h],l=k.name;["wrap","id"].indexOf(l)===-1&&d.setAttribute(l,k.value)}}else{d=a.content;e=0;for(h=d.firstChild;h&&!(e>1);){if(h.nodeType===Node.TEXT_NODE){if(h.nodeValue?.trim()){e=0;break}}else e++;h=h.nextSibling}if(e===1&&d.firstElementChild)for(d=d.firstElementChild.cloneNode(!0),e=a.attributes,h=0;h<e.length;h++)k=e[h],l=k.name,l.startsWith("p:")&&d.setAttribute(l,k.value);else throw Error("BAD_TEMPLATE");}a.remove();a=d.querySelectorAll("template");e=d[A]??(d[A]={});
f&&(e.O=f);for(f=a.length-1;f>=0;f--)h=a[f],h.hasAttribute("id")&&!h.hasAttribute("shadowrootmode")&&(e.P||(e.P=new Map),Ra(h,e.P));c.set(b,d);return d}
function Sa(a,c,b,d){if(a.tagName.startsWith("R-")){if(c===null)throw Error("NULL_CACHE");c=Ta(a,c,b,d);if(!c)return null;a.hasAttribute("shadow")?(d=Ka(a.getAttribute("shadow")),d.attachShadow({mode:"open"}).appendChild(c)):d=c;b?b.after(d):a.before(d);a.remove();return c}if(!b)return console.error("TPL_02"),null;a=a.cloneNode(!0);b.after(a);a[A]={I:3};return a}
function Ta(a,c,b,d){var f=a.tagName.slice(2).toLowerCase();if(d=d?.get(f)??c.get(f))c=d;else{d=document.getElementById(f);if(!d||d.tagName!=="TEMPLATE")throw Error("TEMPLATE_NOT_FOUND "+f);c=Ra(d,c)}for(b=b?.parentElement||a.parentElement;b&&b[A]?.I!==1;b=b.parentElement||wa(b))if(b[A]?.ka===f)return console.error("TPL_03",f),null;b=c.cloneNode(!0);d=[];const e=a.attributes;for(let h=0;h<e.length;h++){const k=e[h],l=k.name;l.startsWith("p:")?b.removeAttribute("pm:"+l.substring(2)):l.startsWith("pm:")?
b.removeAttribute("p:"+l.substring(3)):d.push(l);b.setAttribute(l,k.value)}b[A]={ka:f,I:2,ga:d};c[A]?.P&&(b[A].P=c[A].P);if(a.textContent.trim()!==""&&b.getElementsByTagName("slot").length>0){for(f=document.createDocumentFragment();a.firstChild;)f.appendChild(a.firstChild);a[A]={V:f};b[A].M={g:null,V:f}}else a[A]?.V&&(b[A].M={g:null,V:a[A].V});c[A].O&&(b[A].O=c[A].O);return b};function Ua(a,c,b,d){a=b.j;if(a[ea])if(b=d?.[y]?.target??a[ea]?.h(b.g)?.[y].target??d,Array.isArray(b)&&b.length!==0){if(d=Va(a),d.length>0){c=new Map;let v=!1;const B=a[O];var f=null;for(let g=0,m=b.length;g<m;g++)if(b.hasOwnProperty(g)){var e=b[g],h=B[g];if(h){var k=h[K];if(k===e){a:{k=c;var l=g,u=k.get(e);if(u)for(let n=0,w=u.length;n<w;n++){var r=u[n];if(Math.abs(r)===l){u.splice(n,1);u.length===0&&k.delete(e);k=r<0;break a}}k=!1}if(k)Wa(f,g,h,a,d);else if(!h[L]||h[L].length!==d.length)a:for(e=
h,k=g,e=e[L]??(e[L]=[]),l=0;l<d.length;l++){u=d[l];r=u.g;for(let n=0;n<e.length;n++)if(e[n][L].ea===r)continue a;Xa(f,l,u.H.anchor).after(Ya(k,a,u))}f=h}else if(v||(Za(c,B,g),v=!0),e=$a(c,e),e!==void 0)if(k=Math.abs(e),k===g)e<0&&Wa(f,g,h,a,d),f=h;else{e=B[k];if(!e)throw Error("NO_NODE "+k);bb(c,h[K],g,-k);B[k]=h;Wa(f,g,e,a,d);f=B[g]=e}else B.push(h),bb(c,k,g,-(B.length-1)),f=cb(f,g,a,d)}else v||(Za(c,B,g+1),v=!0),h=$a(c,e),h!==void 0?(h=Math.abs(h),k=B[h],delete B[h],Wa(f,g,k,a,d),f=k):f=cb(f,g,
a,d)}else if(h=B[g])delete B[g],B.push(h),bb(c,h[K],g,-(B.length-1));if(B.length>b.length)for(let g=B.length-1,m=b.length-1;g>m;g--)B.hasOwnProperty(g)&&db(B[g],d),B.splice(g,1)}}else if(b=a[O])for(a=Va(a),d=b.length-1;d>=0;d--)b.hasOwnProperty(d)&&db(b[d],a),b.pop()}
function cb(a,c,b,d){const f=Object.assign(ua(b),{[L]:[]});b[O][c]=f;f[K]=b[K]?.[c]??null;var e=b[K]?.[c]?.[y];e&&(e.v!==f&&(e.v=f),e.path=b[K]?.[y].path+"."+c);for(let h=0,k=d.length;h<k;h++)e=d[h],Xa(a,h,e.H.anchor).after(Ya(c,b,e));return f}
function Ya(a,c,b){var d=b.H;const f=d.$.cloneNode(!0);f[A]=d.$[A];var e=c[O][a];b=b.g;const h=Ha(f,b,!0);h[L].ea=b;const k=h[L].path,l=d.da,u=l[0].name;var r=l[1].name,v=h[N]={[u]:{g:c,h:g=>g,F:a,J:l[0].type===2}};const B={};r&&(v[r]={g:h,h:null,F:a,J:!1},B[r]=void 0);if(d.$[A].I===3)h[N][da]={g:b,h:()=>{},F:"",J:!0,L:r?[u,r]:[u]};else for(a=b[L].path,d=2;d<l.length;d++){r=l[d];v=r.m;if(r.type===4){B[r.name]=v;continue}const g=ta(b,v);if(g){const m=r.name,n=h[N]??(h[N]={}),w=v.lastIndexOf(".");n[m]=
{g:b,h:new Function(a,"return "+a+(w===-1?"":"."+v.substring(0,w))),F:v.substring(w+1),J:r.type===2};h[m]=g}else console.error("CLE_01",v)}h[u]=e;e[L].push(h);h[K]=Na(B,k,h);(e=f[A].O?.create)&&T(e,f,null,h[K],h[P]);c[ea].ja(h,f,!1,b);pa(h);return f}
function Wa(a,c,b,d,f){var e=d[K]?.[c];if(e){var h=e[y];h&&(e[y].v=b,h.path=d[K]?.[y].path+"."+c);b[K]=e}else b[K]=null;d[O][c]=b;b=b[L];for(let l=0,u=b.length;l<u;l++){h=b[l];e=h[L];d=f[l].H;const r=h[N];if(r){var k=d.da;r[k[0].name].F=c;if(k=k[1].name)if(r[k].F=c,h=h[k]?.[D])for(const v of h)na(v,c)}(e=e.D)&&Xa(a,l,d.anchor).after(e)}}function db(a,c){if(a=a[L]){for(let b=0,d=a.length;b<d;b++)va(a[b],c[b].g);a.length=0}}
function Za(a,c,b){for(let d=b,f=c.length;d<f;d++)if(b=c[d])b=b[K],a.get(b)?.push(d)??a.set(b,[d])}function $a(a,c){const b=a.get(c);if(b){const d=b.pop();b.length===0&&a.delete(c);return d}}function bb(a,c,b,d){const f=a.get(c);if(f){for(let e=0,h=f.length;e<h;e++)if(Math.abs(f[e])===b){f[e]=d;return}f.push(d)}else a.set(c,[d])}function Va(a){const c=[];if(a=a[D])for(const b of a)b&&b.u===5&&c.push(b);return c}function Xa(a,c,b){return a?a[L][c]?.[L].D??b:b};function eb(a,c,b,d){const f=b[L].path;c=Z(c);const {A:e,h}=Y(c,f,4);if(e.l.length!==1||e.l[0]!==c)console.error("MM_01",c,"(text input)");else if(U({j:a,s:"value",u:1,o:1,update:h,G:X,C:"",H:d.W?fa:void 0,g:b,B:new Set},b,e.l),fb(c,b))a.readOnly=!0,a.addEventListener("keydown",gb);else{var k=d.W?new Function(f,"$r","_v",`${e.m} = _v===''?'':(+_v||0)`):new Function(f,"$r","_v",`${e.m} = _v`);a.addEventListener(d.ca?"change":"input",l=>{T(k,a,null,b[K],b[P],l.currentTarget.value)})}}
function hb(a,c,b){c=Z(c);let d=!1;c.endsWith("[]")&&(d=!0,c=c.slice(0,-2));const f=b[L].path,e=Y(c,f,2,"_chb_m_"+f+"_"+d),h=e.A;if(h.l.length!==1||h.l[0]!==c)console.error("MM_01",c,"(checkbox)");else{if(!e.h){const r=new Function(f,"$r",`return ${h.m} `);e.h=d?function(v,B,g){v=r.call(null,v,B);return Array.isArray(v)&&v.includes(g.H[0])}:function(v,B,g){return r.call(null,v,B)===g.H[0]}}a.hasAttribute("name")||(a.name=c);var k=[!0,!1];if(a.hasAttribute("value")){var l=a.value;l.trim().startsWith("{{")?
({h:l}=Y(Z(l),f,4),l=l.call(null,b[K],b[P]),Array.isArray(l)?(l.hasOwnProperty(0)&&(k[0]=l[0]),l.hasOwnProperty(1)&&(k[1]=l[1])):k[0]=l):k[0]=(new Function("return "+Z(l)))()}a.value=k[0];l=Ma(b[K],c);a.checked=l!==void 0?d?Array.isArray(l)&&l.includes(k[0]):l===k[0]:!1;U({j:a,s:"checked",u:1,o:1,H:k,update:e.h,G:X,C:a.checked,g:b,B:new Set},b,h.l);if(fb(c,b))a.addEventListener("click",gb),a.addEventListener("keydown",gb);else{var u=d?new Function(f,"$r","_checked","_v","_fun",`if (!_fun(${h.m}, _checked, _v)) {${h.m}=[_v] } `):
new Function(f,"$r","_v",`${h.m} = _v`);a.addEventListener("change",r=>{r=r.currentTarget.checked;d?T(u,a,null,b[K],b[P],r,k[0],ib):T(u,a,null,b[K],b[P],k[r?0:1])})}}}
function jb(a,c,b){if(a.hasAttribute("value")){c=Z(c);var d=b[L].path,f=Y(c,d,2,"_r_r_m+"+d),e=f.A;if(e.l.length!==1||e.l[0]!==c)console.error("MM_01",c,"(radio)");else{if(!f.h){const u=new Function(d,"$r",`return ${e.m} `);f.h=function(r,v,B){return u.call(null,r,v)===B.H}}var h=a.value;if(h.trim().startsWith("{{")){var {h:k}=Y(Z(h),d,4);h=k.call(null,b[K],b[P]);a.value=h}else h=a.value;a.hasAttribute("name")||(a.name=c);k=Ma(b[K],c);a.checked=k===h;U({j:a,s:"checked",u:1,o:1,H:h,update:f.h,G:X,
C:a.checked,g:b,B:new Set},b,e.l);if(fb(c,b))a.addEventListener("click",gb),a.addEventListener("keydown",gb);else{var l=new Function(d,"$r","_v",`${e.m} = _v`);a.addEventListener("change",()=>{T(l,a,null,b[K],b[P],h)})}}}else console.error("MM_02",a)}
function kb(a,c,b,d){const f=a.hasAttribute("multiple"),e=b[L].path;c=Z(c);const h=Y(c,e,2,"_sel_m_"+e+"_"+f),k=h.A;if(k.l.length!==1||k.l[0]!==c)console.error("MM_01",c,"(select)");else{var l=d.W,u=f?new Function(e,"$r",`if (!Array.isArray(${k.m})) {${k.m}=[] } return ${k.m} `):l?new Function(e,"$r","_v",`${k.m}= _v===''?'':(+_v||0)`):new Function(e,"$r","_v",`${k.m}=_v`);if(!h.h)if(f)h.h=function(r,v,B){r=u.call(null,r,v);B=B.j.options;for(let m=0,n=B.length;m<n;m++){v=B[m];var g=v.value;g=l?g===
""?"":+g||0:g;v.selected?r.includes(g)||(v.selected=!1):r.includes(g)&&(v.selected=!0)}};else{const r=new Function(e,"$r",`return ${k.m}`);h.h=l?function(v,B,g){v=r.call(null,v,B);g=g.j;g.value=""+v;if(g.selectedIndex===-1){g=g.options;for(let m=0,n=g.length;m<n;m++){B=g[m];const w=B.value;if(v===(w===""?"":+w||0)){B.selected=!0;break}}}}:r}d=T(new Function(e,"$r",`return ${k.m} `),a,null,b[K],b[P]);a.value=d;U({j:a,s:f||l?"":"value",u:1,o:1,update:h.h,G:X,C:d,g:b,B:new Set},b,k.l);fb(c,b)?(a.addEventListener("mousedown",
gb),a.addEventListener("keydown",gb)):a.addEventListener("change",r=>{r=r.currentTarget.options;if(f){var v=T(u,a,null,b[K],b[P])??[];for(let m=0,n=r.length;m<n;m++){var B=r[m],g=B.value;g=l?g===""?"":+g||0:g;B.selected?v.includes(g)||v.push(g):(B=v.indexOf(g),B!==-1&&v.splice(B,1))}}else for(let m=0,n=r.length;m<n;m++)if(v=r[m],v.selected){T(u,a,null,b[K],b[P],v.value);break}})}}
function ib(a,c,b){if(c)if(Array.isArray(a))a.push(b);else return!1;else Array.isArray(a)&&(c=a.indexOf(b),c!==-1&&a.splice(c,1));return!0}function gb(a){console.error("MM_03",a.currentTarget.getAttribute("model"));a.preventDefault();a.stopPropagation();return!1}function fb(a,c){return(a=c[N]&&c[N][(a.match(/[^.[\]]+/g)||[])[0]||""])?!a.J:!1};const lb=new Set(["ref","model","view","error"]);
function mb(a,c){function b(g,m,n=!1,w){const t=document.createNodeIterator(m,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);n&&t.nextNode();n=g[L].path;const G=m[A]?.P;for(var p=t.nextNode();p!==null;p=t.nextNode())if(p.nodeType===Node.TEXT_NODE){var x=p.nodeValue.indexOf("{{");if(x>-1){var q=p.nodeValue.indexOf("}}",x+2);if(q===-1)throw Error("MISSING_ANCHOR "+p.nodeValue);x>0&&(p=p.splitText(x),t.nextNode(),q-=x,x=0);q+2<p.nodeValue.length+x&&p.splitText(q+2);const {A:H,h:M}=Y(p.nodeValue.slice(2,
-2),n,4);U({j:p,s:"nodeValue",u:1,o:1,C:"",update:M,G:X,g,B:new Set},g,H.l)}}else if(x=p.tagName,x==="TEMPLATE")p.hasAttribute("id")||p.hasAttribute("shadowrootmode")?Ra(p,B):console.warn("W_IG_01",p);else{if(p.hasAttribute("error")){q=w&&p===m?w:g;var z=q[L].path,C=Y(Z(p.getAttribute("error")),z,2,"__r_err");C.h||(C.h=new Function(z,"$r","$err",C.A.m));(p[A]??(p[A]={})).ba={g:q,h:C.h}}if(p.hasAttribute("exec")&&(q=Y(Z(p.getAttribute("exec")),n,3),p.removeAttribute("exec"),za(g,p,q),!p.parentElement))continue;
p.hasAttribute("exec.async")&&(q=Y(Z(p.getAttribute("exec.async")),n,2,"__r_exa"),q.h||(q.h=new Ca(n,"$r",q.A.m)),p.removeAttribute("exec.async"),za(g,p,q));if(x==="SLOT"&&m[A].M)x=g,q=m[A].M,q.g?(z=q.V.cloneNode(!0),C=q.g[D],q.g[D]=x[D],b(q.g,z),q.g[D]=C,p.before(z),p.remove()):console.error("ISS_01");else if(x.startsWith("R-"))x=x.slice(2).toLowerCase(),p.hasAttribute("if")?d(p,p.getAttribute("if"),g,x,G):p.hasAttribute("f")?e(p,g,G):(p=Sa(p,B,void 0,G))&&h(p,g);else if(q=p.getAttribute("if"))d(p,
q,g);else if(p.getAttribute("f"))e(p,g);else{if(q=p.getAttribute("ref"))if(C=p,x=q,z=w&&p===m?w:g,x=Z(x),x.startsWith("$r.")){var E=x.substring(3),{A:F}=Y(E,z[L].path);if(F.l.length!==1||F.l[0]!==E)console.error("SR_02",x);else{var {j:W,s:Q}=xa(E,z[P]);W===null?console.error("SR_03",x):(C=Aa(C),z=z[L],z.D&&3===z.D[A].I&&(z.T??(z.T=new Map)).set(x,C),W[Q]=C)}}else console.error("SR_01",x);(q=p.getAttribute("view"))&&r(p,q,g);if(q=p.getAttribute("r-src"))p.removeAttribute("r-src"),p.setAttribute("src",
q);for(x=p.attributes.length-1;x>=0;x--)if(q=p.attributes[x],E=q.value.trim())if(F=q.name,F==="model"||F.startsWith("model.")){if(p.tagName==="SELECT"&&p.childElementCount>0){if(q=p.lastElementChild)for(;t.nextNode()!==q;);b(g,p,!0)}q=p;z=E;C=g;E={W:!1,ca:!1};if(F!=="model"){F=F.split(".");for(let H=1,M=F.length;H<M;H++){var J=F[H];J==="num"?E.W=!0:J==="lazy"?E.ca=!0:console.error("IM_03",J)}}switch(q.tagName){case "INPUT":switch(q.type){case "checkbox":hb(q,z,C);break;case "radio":jb(q,z,C);break;
case "submit":case "button":case "reset":case "image":console.error("IM_01",q.type);break;default:eb(q,z,C,E)}break;case "TEXTAREA":eb(q,z,C,E);break;case "SELECT":kb(q,z,C,E);break;default:console.error("IM_02",q.tagName)}}else if(F.startsWith("h:")||F.startsWith("h."))u(p,F,E,g,!0);else if(F.startsWith("s:"))u(p,F,E,w&&p===m?w:g,!1);else if(F.startsWith("on:")||F.startsWith("on.async:"))l(p,F,E,w&&p===m?w:g);else if(!(!E.includes("{{")||lb.has(F)||F.startsWith("p:")||F.startsWith("pm:")||F==="value"&&
p.hasAttribute("model"))){z=[];C=[];J="";var I=1;for(let H=0,M=E.length;H<M;H++){const V=E[H],ca=E[H+1];if(V==="{"&&ca==="{"){if(I===2){console.warn("IG_01",E);I=3;break}J&&z.push(J);J="";I=2;H++}else I===2&&V==="}"&&ca==="}"?(C.push(z.length),z.push(J.trim()),J="",I=1,H++):J+=V}switch(I){case 2:console.error("IG_02",E);case 3:continue;default:J&&z.push(J)}E=w&&p===m&&p[A]?.I===2&&p[A].ga.includes(F)?w:g;F=E[L].path;if(z.length===1){const {A:H,h:M}=Y(z[0],F,4);U({j:q,s:"value",u:1,o:1,C:"",update:M,
G:X,g:E,B:new Set},E,H.l,g[D])}else{for(let H=0,M=C.length;H<M;H++){J=C[H];const {A:V,h:ca}=Y(z[J],F,4);I=T(ca,p,null,E[K],E[P]);U({j:q,s:"",u:1,o:1,C:I,H:{f:ca,i:J,p:z},update:La,G:X,g:E,B:new Set},E,V.l,g[D]);z[J]=I}q.value=z.join("")}}}}}function d(g,m,n,w,t){w=Z(m);const G=n[L].path;m=document.createComment(`if: ${w}`);m[A]={P:t};g.before(m);g.removeAttribute("if");g.remove();const {A:p,h:x}=Y(w,G,4);g={anchor:m,X:n,ia:g,Y:void 0,h:x,o:0,N:null};m.nextElementSibling?.hasAttribute("else")&&(t=
m.nextElementSibling,t.removeAttribute("else"),t.remove(),g.Y=t);U({j:g,s:"",u:1,o:1,update:f,G:function(){const q=this.j;q.N&&(va(q.N,q.X),q.N=null);q.o=0},C:0,g:n,B:new Set},n,p.l)}function f(g,m,n){n=n.j;g=!!n.h.call(this,g,m)===!0?1:n.Y?2:0;if(n.o!==g){n.o!==0&&n.N&&(va(n.N,n.X),n.N=null);if(g!==0){m=Sa(g===1?n.ia:n.Y,B,n.anchor,n.anchor[A]?.P);if(!m){n.N=null;n.o=0;return}const w=n.X;m=m[A].I===3?k(m,w):h(m,w,!0);n.N=m;pa(m)}n.o=g}}function e(g,m,n){var w=g.getAttribute("f"),t=Z(w).split("=>");
if(t.length!==2)console.error("IFR_01",w);else{var G=t[0].trim(),[p,x]=t[1].replace(/\s*/g,"").split(",");t=/^[a-zA-Z_$][a-zA-Z0-9_$]*$/;if(!t.test(p)||x&&!t.test(x))console.error("IFR_02",w);else{w=m[L].path;t=document.createComment(`for: ${G}`);if(g.hasAttribute("shadow")&&g.tagName.startsWith("R-")){var q=Ka(g.getAttribute("shadow"));q.attachShadow({mode:"open"}).appendChild(t);g.removeAttribute("shadow");g.before(q)}else g.before(t);g.removeAttribute("f");g.remove();var {A:z,h:C}=Y(G,w,4),E=z.l.length;
if(E===1&&z.l[0]===G){var F=ta(m,G);var W=z.l;q=m;var Q=G.includes(".")?function(I){return C.call(null,I[K],I[P])}:function(I){return I[K][G]}}else{const I="l_"+Ea();q=Ha(void 0,m,!0);W=[I];if(E===0){try{Q=C?.call(null)}catch(H){console.error("IFR_03",", prop:",I,", err:",H)}q[K]=Na({[I]:Q},q[L].path,q);F=q[I]=ua(q);F[K]=q[K][I];Q=function(){return F[K]}}else{const H=q[K]=Na({[I]:null},q[L].path,q);F=ta(q,I);Q={j:H,s:I,o:1,u:2,C:null,update:C,G:X,g:m,B:new Set};U(Q,m,z.l,q[D]);na(Q,null);Q=function(){return H[I]}}}if(F){F[ea]||
(F[ea]={ja:b,h:Q});Q=[{name:p,type:2,m:""},{name:x,type:3,m:""}];if(g.tagName.startsWith("R-")){g.removeAttribute("p:"+p);g.removeAttribute("pm:"+p);x&&(g.removeAttribute("p:"+x),g.removeAttribute("pm:"+x));g=Ta(g,B,t,n);if(!g)return;n=g.attributes;for(let I=0;I<n.length;I++){var J=n[I];const H=J.name,M=H.startsWith("p:")?1:H.startsWith("pm:")?2:-1;if(M===-1)continue;J=J.value;const V=Z(J),ca=H.substring(H.indexOf(":")+1);let ab=!0;if(/^\s*{{/.test(J)){const {A:Fa}=Y(V,w,4);if(Fa.l.length===1&&Fa.l[0]===
V){Q.push({name:Ja(ca),type:M,m:V});continue}else Fa.l.length!==0&&(ab=!1)}ab?Q.push({name:Ja(ca),type:4,m:(new Function("return "+V))()}):console.error("IFR_05",H,"=",J)}}else g[A]={I:3};q!==m&&((q[N]??(q[N]={}))[da]={g:m,h:()=>{},F:"",J:!0,L:W});m={j:F,s:"",u:5,o:1,H:{da:Q,anchor:t,$:g},update:Ua,G:X,C:null,g:q,B:new Set};U(m,q,W);E===0&&na(m,F[K])}else console.error("IFR_04",", expr:",G)}}}function h(g,m,n=!1){var w=m[L].path;const t=Ha(g,m,n),G=t[L].path,p={};var x=[];for(let W=0,Q=g.attributes.length;W<
Q;W++){var q=g.attributes[W],z=q.name;const J=z.startsWith("p:")?1:z.startsWith("pm:")?2:-1;if(J!==-1){z=Ja(z.substring(z.indexOf(":")+1));var C=q.value;q=Z(C);if(/^\s*{{/.test(C)){const {A:I,h:H}=Y(q,w,4);var E=I.l.length;if(E===1&&I.l[0]===q){if(C=ta(m,q)){E=t[N]??(t[N]={});const M=q.lastIndexOf(".");E[z]={g:m,h:new Function(w,"return "+w+(M===-1?"":"."+q.substring(0,M))),F:q.substring(M+1),J:J===2};t[z]=C;continue}console.error("ATR_01",q)}if(E>0){C=t[L].ha;C||(C=Ha(void 0,t,!1),C[L].path=w+"_G"+
t[L].path.substring(w.length+1),t[L].ha=C);E=C[K]??(C[K]=Na({},C[L].path,C));E[y].target[z]=null;E={j:E,s:z,o:1,u:2,C:null,update:function(M,V){M=H.call(this,M,V);return(V=M?.[y])?V.target:M},G:X,g:m,B:new Set};U(E,m,I.l,C[D]);na(E,null);n||(E.o=1);t[z]=C[z];p[z]=void 0;(t[N]??(t[N]={}))[z]={g:C,h:function(M){return M},F:z,J:J===2};J===2&&console.error("ATR_02",q);continue}p[z]=H()}else p[z]=(new Function(`return ${q}`))();x.push(z);J===2&&console.error("ATR_03",q)}}w=t[K]=Na(p,G,t);let F;g[A]?.O?.create&&
(F=n?void 0:Object.keys(p),T(g[A].O.create,g,null,w,t[P],g));b(t,g,!1,m);if(!n){for(g=0;g<x.length;g++)m=x[g],w[m]=w[m];if(F)for(let W=Object.keys(p),Q=0,J=W.length;Q<J;Q++)x=W[Q],F.includes(x)||(w[x]=p[x])}return t}function k(g,m){const n=Ha(g,m,!0),w=n[L].path;let t;const G={},p=g.attributes;for(let q=0;q<p.length;q++){const z=p[q];var x=z.name;x.startsWith("ps:")&&(t||(t=[]),x=Ja(x.substring(3)),t.push(x),G[x]=z.value)}n[N]={[da]:{g:m,h:()=>{},F:"",J:!0,L:t}};!g[A].M&&m[L].D?.[A].M&&(g[A].M=m[L].D[A].M);
n[K]=Na(G,w,n);b(n,g);return n}function l(g,m,n,w){var t=m.indexOf(":");t=t>0?m.substring(t+1):m.substring(1);g.removeAttribute(m);m=m.startsWith("on.async:");const G=w[L].path;n=Y(Z(n),G,2,"__r_l"+(m?"_a":""));n.h||(n.h=m?new Ca(G,"$r","_","$evt",n.A.m):new Function(G,"$r","_","$evt",n.A.m));const p={j:g,s:"",u:4,o:1,C:"",update:n.h,G:()=>{},g:w,B:new Set};g.addEventListener(t,x=>{na(p,x)})}function u(g,m,n,w,t){const G=m.substring(m.indexOf(":")+1).replace(/-./g,z=>z[1].toUpperCase());if(G){var p=
w[L].path;n=Z(n);var {A:x,h:q}=Y(n,p,4);if(t){if(m.startsWith("h:"))t=g[G];else if(m.startsWith("h.num:"))t=+g[G];else if(m.startsWith("h.bool:"))t=g[G]==="true"?!0:!1;else if(m.startsWith("h.str:"))t=""+g[G];else{console.error("AS_02",m);return}if(x.l.length!==1||x.l[0]!==n){console.error("AS_03",n);return}({j:m}=xa(n,w[K]));if(m===null){console.error("AS_04",n);return}T(new Function(p,"$r","_v",`${x.m}=_v`),g,null,w[K],w[P],t)}else g[G]=t=T(q,g,null,w[K],w[P]),g.removeAttribute(m);U({j:g,s:G,u:1,
o:1,C:t,update:q,G:X,g:w,B:new Set},w,x.l)}else console.error("AS_01",m)}function r(g,m,n){const w=n[L].path;m=Z(m);const {A:t,h:G}=Y(m,w,4);if(t.l.length!==1||t.l[0]!==m)console.error("IV_01",m);else{g.removeAttribute("view");g.hasAttribute("shadow")&&g.attachShadow({mode:"open"});g[A]={I:4};var p={j:{fa:g,S:null,h:G},s:"",u:1,o:1,C:g.innerHTML,update:v,G:function(){const x=this.j;x.S&&(va(x.S,this.g),x.S=null);x.fa.innerHTML=p.C;x.S=null},g:n,B:new Set};U(p,n,t.l)}}function v(g,m,n){const w=n.j;
var t=w.h.call(null,g,m);if(t&&Object.prototype.hasOwnProperty.call(t,"html")&&Object.prototype.hasOwnProperty.call(t,"state")){g=w.fa;if(w.S)va(w.S,n.g);else for(m=g.shadowRoot??g;m.lastChild;)m.removeChild(m.lastChild);m=document.createElement("template");m.innerHTML=t.html;m=m.content;var G=m.querySelectorAll("script"),p;G.length>0&&(G.length!==1?console.error("GEN_01"," [view data]"):p=(new Function('"use strict";'+G[0].textContent+';return{create:typeof create==="function"?create:null,kill:typeof kill==="function"?kill:null}')).call(null),
G.forEach(C=>C.remove()));G=t.readOnly!==!0;n=Ha(g,n.g,!0);n[K]=Na({},n[L].path,n);t=t.state;var x=t[y].v,q={},z=function(C){return C};for(const C in t)t.hasOwnProperty(C)&&(q[C]={g:x,h:z,F:C,J:G},n[C]=x[C]=ua(x));n[N]=q;p&&(g[A].O=p,p.create&&T(p.create,g,null,n[K],n[P]));b(n,m);pa(n);(g.shadowRoot??g).appendChild(m);w.S=n}else console.error("UV_01",t),n.G()}const B=new Map;b(a,c)};export const R=function(a,c={},b,d){if(c===null||typeof c!=="object")throw Error("BAD_STATE");const f=Ea();a[A]={I:1};const e={[K]:null,[L]:{path:f,U:[],D:a}};e[P]=ya(d?{global:{},local:d}:{global:{}},a,e,!1);c=e[K]=Na(c,f,e);b&&typeof b==="function"&&T(b,a,null,c,e[P]);mb(e,a);ka(c,e,f);a.hasAttribute("hidden")&&a.removeAttribute("hidden");return c};
